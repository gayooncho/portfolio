library(ggplot2)
library(tidyverse)

file_out <- "C:/project1/cctv.csv"

cctv <- read.csv(file = "C:/project1/cctv.csv", encoding = "euc-kr")
#=====================================================================
#cctv 연도별로 데이터 추출
#=====================================================================
cctv <- cctv[, c(1, 6, 11, 16, 21, 26, 31)]

head(cctv)

str(cctv)
#=====================================================================
# 컬럼 이름 변경  X2016 -> y2016
#=====================================================================
names(cctv) <- c("District", "y2016", "y2017", "y2018", "y2019", "y2020", "y2021")

#=====================================================================
# 숫자 계산 및 그래프를 원활하게 그리기 위해 [,] 제거
#=====================================================================
cctv$y2016 <- gsub("[,]", "", cctv$y2016)
cctv$y2017 <- gsub("[,]", "", cctv$y2017)
cctv$y2018 <- gsub("[,]", "", cctv$y2018)
cctv$y2019 <- gsub("[,]", "", cctv$y2019)
cctv$y2020 <- gsub("[,]", "", cctv$y2020)
cctv$y2021 <- gsub("[,]", "", cctv$y2021)

#=====================================================================
# chr 데이터타입 num으로 변환
#=====================================================================
cctv$y2016 <- as.numeric(cctv$y2016)
cctv$y2017 <- as.numeric(cctv$y2017)
cctv$y2018 <- as.numeric(cctv$y2018)
cctv$y2019 <- as.numeric(cctv$y2019)
cctv$y2020 <- as.numeric(cctv$y2020)
cctv$y2021 <- as.numeric(cctv$y2021)

#=====================================================================
# 2021년도 데이터 추출
#=====================================================================
cctv <- data.frame(cctv$District,cctv$y2021)

#=====================================================================
# 컬럼 이름 변경
#=====================================================================
names(cctv) <- c("district", "cctv")

cctv
#=====================================================================
# 파일 내보내기
#=====================================================================
write_csv(cctv,"cctv.csv")
